:root{
  --wrap-w: 679px;
  --gap: 1px;
  --bg: #fff;
  --fg: #111;
  --muted: #6b7280;
  --line: #e5e7eb;
  --btn: #111;
  --btnTxt: #fff;
  --ghost: #f3f4f6;
  --ghostTxt: #111;
  --chip: #f9fafb;
  --chipSel: #111;
  --chipSelTxt: #fff;
  --overlay: rgba(17,17,17,.08);
  --modalBg: rgba(0,0,0,.6);
  --panelBg: #0f0f0f;
  --copyBg: rgba(0,0,0,.55);
  --ownerTxt: #fff;
}

*{box-sizing:border-box}
html,body{margin:0;padding:0;background:var(--bg);color:var(--fg);font:14px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif}
.wrap{width:100%;max-width:var(--wrap-w);margin:20px auto;padding:0 8px}

/* Toolbar */
.toolbar{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:10px;flex-wrap:wrap}
.toolbar__left{display:flex;gap:8px;align-items:center}

.btn{display:inline-flex;align-items:center;gap:8px;border:1px solid var(--line);background:var(--btn);color:var(--btnTxt);padding:8px 12px;border-radius:8px;cursor:pointer}
.btn[disabled]{opacity:.5;pointer-events:none}
.btn--ghost{background:var(--ghost);color:var(--ghostTxt)}
.btn--more{background:var(--ghost);color:var(--ghostTxt);border-radius:999px;padding:8px 16px;border:1px solid var(--line)}
.badge{display:inline-flex;min-width:18px;height:18px;padding:0 6px;align-items:center;justify-content:center;border-radius:999px;background:#111;color:#fff;font-size:12px;margin-left:6px}

.ico-refresh{width:14px;height:14px;display:inline-block;border:2px solid #fff;border-top-color:transparent;border-radius:50%;animation:spin 1s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}

/* Selects */
.filters{display:flex;gap:8px;flex-wrap:wrap}
.select{position:relative}
.select__btn{background:var(--chip);color:#111;border:1px solid var(--line);padding:6px 10px;border-radius:8px;cursor:pointer;min-width:140px;text-align:left}
.select.open .select__btn{outline:2px solid #111;outline-offset:1px}
.select__menu{position:absolute;z-index:12;top:calc(100% + 6px);left:0;width:260px;max-height:360px;overflow:auto;background:#fff;border:1px solid var(--line);border-radius:10px;box-shadow:0 8px 20px rgba(0,0,0,.08);padding:8px;display:none}
.select.open .select__menu{display:block}

.option{display:flex;align-items:center;gap:8px;padding:6px 8px;border-radius:8px;cursor:pointer}
.option:hover{background:#f3f4f6}
.option.selected{background:#111;color:#fff}
.option__right{margin-left:auto;color:#6b7280;font-size:12px}
.search{display:flex;align-items:center;gap:6px;padding:6px 8px;border:1px solid var(--line);border-radius:8px;margin-bottom:6px}
.search input{flex:1;border:0;outline:0;background:transparent}
.search button{border:0;background:transparent;cursor:pointer;color:#666}

/* Grid */
.grid{display:grid;grid-template-columns:repeat(3, 1fr);gap:var(--gap)}
.card{position:relative;background:#000;overflow:hidden}
.card__media{width:100%;aspect-ratio:4/5;object-fit:cover;display:block;background:#111;color:#fff}
.card__owner{position:absolute;top:6px;left:6px;width:24px;height:24px;border-radius:6px;display:flex;align-items:center;justify-content:center;font-size:10px;font-weight:700;color:var(--ownerTxt);box-shadow:0 2px 6px rgba(0,0,0,.25)}
.card__badges{position:absolute;top:6px;right:6px;display:flex;gap:6px}
.badge-ico{display:inline-flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:6px;background:rgba(0,0,0,.45)}
.badge-ico svg{width:14px;height:14px;fill:#fff}
.badge-ico__count{position:absolute;bottom:-6px;right:-6px;background:#111;color:#fff;border-radius:10px;padding:0 5px;font-size:10px;border:1px solid #fff}

.card__hover{pointer-events:none;position:absolute;left:0;right:0;bottom:0;padding:8px;background:linear-gradient(transparent, rgba(0,0,0,.55));color:#fff;opacity:0;transition:opacity .2s}
.card:hover .card__hover{opacity:1}
.card__title{font-weight:700;font-size:12px}
.card__date{font-size:11px;opacity:.85;margin-top:2px}

.placeholder{display:flex;align-items:center;justify-content:center;width:100%;aspect-ratio:4/5;background:#f3f4f6;color:#9ca3af;border:1px dashed #e5e7eb}

/* Overlay */
.overlay{position:fixed;inset:0;background:var(--overlay);display:flex;align-items:center;justify-content:center;z-index:50}
.spinner{width:28px;height:28px;border:3px solid #111;border-top-color:transparent;border-radius:50%;animation:spin .9s linear infinite}

/* Modal */
.modal{position:fixed;inset:0;display:none;z-index:100}
.modal.is-open{display:block}
.modal__backdrop{position:absolute;inset:0;background:var(--modalBg);backdrop-filter:blur(2px)}
.modal__panel{position:relative;width:min(92vw, 679px);max-height:90vh;margin:4vh auto;background:var(--panelBg);border-radius:14px;box-shadow:0 24px 60px rgba(0,0,0,.35);overflow:hidden;display:flex;flex-direction:column}
.modal__close{position:absolute;top:8px;right:8px;z-index:2;background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.3);color:#fff;border-radius:10px;padding:6px 10px;cursor:pointer}
.viewer{display:flex;flex-direction:column;gap:8px;padding:12px}
.viewer__stage{display:flex;align-items:center;justify-content:center;background:#000;border-radius:10px;min-height:220px;max-height:62vh}
.viewer__stage img,.viewer__stage video{max-width:100%;max-height:60vh;object-fit:contain;display:block}
.viewer__nav{display:flex;align-items:center;justify-content:center;gap:10px}
.nav{background:rgba(255,255,255,.12);border:1px solid rgba(255,255,255,.3);color:#fff;border-radius:10px;padding:6px 10px;cursor:pointer}
.viewer__dots{color:#fff;opacity:.9;font-size:12px}
.viewer__copy{background:var(--copyBg);color:#e5e7eb;padding:10px;border-radius:10px;max-height:20vh;overflow:auto}

/* More */
.more{display:flex;justify-content:center;margin:14px 0}

/* Toasts */
.toasts{position:fixed;top:12px;right:12px;display:flex;flex-direction:column;gap:8px;z-index:200}
.toast{background:#111;color:#fff;padding:8px 12px;border-radius:10px;box-shadow:0 6px 20px rgba(0,0,0,.2)}

/* Responsive tweak for very narrow embeds */
@media (max-width: 720px){
  .wrap{margin:10px auto}
  .select__menu{width:86vw}
}
